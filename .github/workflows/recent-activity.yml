name: Update README with Recent Activity

on:
  # å®šæ—¶è§¦å‘ï¼šæ¯12å°æ—¶è¿è¡Œä¸€æ¬¡
  schedule:
    - cron: "0 */12 * * *"
  
  # æ‰‹åŠ¨è§¦å‘ï¼šåœ¨GitHubé¡µé¢å¯ä»¥æ‰‹åŠ¨è¿è¡Œ
  workflow_dispatch:
  
  # æ¨é€è§¦å‘ï¼šå½“READMEæˆ–å·¥ä½œæµæ–‡ä»¶æ›´æ”¹æ—¶ä¹Ÿè¿è¡Œ
  push:
    branches: [ main, master ]
    paths:
      - 'README.md'
      - '.github/workflows/update-activity.yml'

# è®¾ç½®æƒé™ï¼ˆå¿…é¡»è¦æœ‰å†™æƒé™ï¼‰
permissions:
  contents: write

jobs:
  update-readme:
    name: Update README with GitHub Activity
    runs-on: ubuntu-latest
    
    steps:
      # æ­¥éª¤1: æ£€å‡ºä»£ç 
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          # ä½¿ç”¨GITHUB_TOKENè¿›è¡Œè®¤è¯
          token: ${{ secrets.GITHUB_TOKEN }}
          # è·å–æ‰€æœ‰å†å²è®°å½•ä»¥ä¾¿æ­£ç¡®æ¯”è¾ƒæ›´æ”¹
          fetch-depth: 0

      # æ­¥éª¤2: æ›´æ–°READMEä¸­çš„æ´»åŠ¨è®°å½•
      - name: Update README with recent activity
        uses: jamesgeorge007/github-activity-readme@master
        with:
          # GitHubè®¤è¯ä»¤ç‰Œï¼ˆå¿…éœ€ï¼‰
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          
          # æ˜¾ç¤ºçš„æ´»åŠ¨è®°å½•æ•°é‡ï¼ˆé»˜è®¤5æ¡ï¼‰
          MAX_LINES: 8
          
          # æäº¤ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
          COMMIT_MSG: "ğŸ“Š docs: update recent activity [automated]"
          
          # READMEæ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º./README.mdï¼‰
          README_PATH: "./README.md"
          
          # æ˜¯å¦è‡ªåŠ¨æ›´æ–°READMEï¼ˆå¿…éœ€ï¼‰
          UPDATE_README: true
          
          # æ˜¯å¦æ˜¾ç¤ºæäº¤è®°å½•ï¼ˆå¯é€‰ï¼‰
          SHOW_COMMITS: true
          
          # æ˜¯å¦æ˜¾ç¤ºIssuesï¼ˆå¯é€‰ï¼‰
          SHOW_ISSUES: true
          
          # æ˜¯å¦æ˜¾ç¤ºPull Requestsï¼ˆå¯é€‰ï¼‰
          SHOW_PR: true
          
          # æ’é™¤çš„ä»“åº“ï¼ˆå¯é€‰ï¼Œç”¨é€—å·åˆ†éš”ï¼‰
          # EXCLUDE_REPOS: "repo1,repo2"
          
          # åŒ…å«çš„ä»“åº“ï¼ˆå¯é€‰ï¼Œç”¨é€—å·åˆ†éš”ï¼‰
          # INCLUDE_REPOS: "repo1,repo2"
          
          # æäº¤è€…é‚®ç®±ï¼ˆå¯é€‰ï¼‰
          COMMITTER_EMAIL: "github-actions[bot]@users.noreply.github.com"
          
          # æäº¤è€…åç§°ï¼ˆå¯é€‰ï¼‰
          COMMITTER_NAME: "github-actions[bot]"

      # æ­¥éª¤3: ï¼ˆå¯é€‰ï¼‰éªŒè¯æ›´æ”¹
      - name: Verify changes
        run: |
          echo "âœ… READMEæ›´æ–°å®Œæˆï¼"
          echo "ğŸ“ æŸ¥çœ‹æ›´æ”¹ï¼š"
          git show --stat
